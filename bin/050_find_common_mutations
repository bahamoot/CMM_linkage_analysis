#!/bin/bash

script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

tmp_dir="$script_dir/tmp"
tmp_homozygous1="$tmp_dir/tmp_homozygous1"
tmp_homozygous2="$tmp_dir/tmp_homozygous2"
tmp_homozygous3="$tmp_dir/tmp_homozygous3.csv.tab.csv"

#---------- input --------------
first_member=$1
second_member=$2
out=$tmp_homozygous3

#---------- look for homozygous --------------
cat $first_member > $tmp_homozygous1
cat $second_member >> $tmp_homozygous1
sort $tmp_homozygous1 | uniq -d > $tmp_homozygous2
#uniq -d $tmp_homozygous2 | sort -r > $tmp_homozygous3
grep "AAChange" $tmp_homozygous2 > $out
awk -F'\t' '$8>0 { print $0}' $tmp_homozygous2 | grep -v "AAChange" | sort -t$'\t' -k8 -r >> $out
awk -F'\t' '$8<=0 { print $0}' $tmp_homozygous2 | sort -t$'\t' -k27 >> $out
##
##    awk -F'\t' '{ printf "%s\t%s\t%s\n", $22, $23, $24 }' $first_member
#cat $first_member | head | while read line ;
#do
##    echo $line
##    echo $line
#    echo $line"345\n678\n"
#    #echo $line | awk -F'\t' '{ printf "%s\t%s\t%s\t%s\n", $22, $23, $24, $0 }' ;
#    #key="$( awk -F'\t' '{ key=`printf "%s\t%s\t%s\n", $22, $23, $24`; print $key }' $line ) "
#    #echo $key ; 
#done 
##awk -F'\t' '{ key=`printf "%s\t%s\t%s\n", $22, $23, $24`; print $key }' $first_member
##awk -F'\t' '{ printf "%s\t%s\t%s\n", $22, $23, $24 }' $first_member
##head $first_member | awk '{ tot=0; for (i=1; i<=NF; i++) tot += $i; print NF; }' 

